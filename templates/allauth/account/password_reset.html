{% extends "account/base.html" %}
{% load static %}
{% load i18n allauth account %}
{% load widget_tweaks %}

{% block head_title %}
    {% trans "Password Reset" %}
{% endblock head_title %}

{% block content %}
<div class="container" role="main" aria-label="Password reset page">
    <div class="row justify-content-center mt-5 mb-5">
        <div class="col-lg-6 col-md-8 col-sm-12 p-5 shadow-sm rounded-0 signup-card" role="region" aria-label="Password reset form container">

            <h1 class="fw-bold mb-3 text-center fs-1 signup-title" aria-label="Password reset heading">
                {% trans "Password Reset" %}
            </h1>

            {% if user.is_authenticated %}
                {% include "account/snippets/already_logged_in.html" %}
            {% endif %}

            <p class="text-center mb-4 fs-6 signup-subtext">
                {% trans "Forgotten your password?" %} <br>
                {% trans "Enter your email address below, and we'll send you a link to reset it." %}
            </p>

            {% url 'account_reset_password' as reset_url %}
            {% element form form=form method="post" action=reset_url tags="password-reset" %}
                {% slot body %}
                    {% csrf_token %}
                    {% for field in form %}
                        <div class="mb-4">
                            <label for="{{ field.id_for_label }}" class="form-label fw-semibold text-dark">
                                {{ field.label }}
                            </label>
                            {{ field|add_class:"form-control form-control-lg rounded-0" }}
                            {% if field.errors %}
                                <div class="text-danger small mt-1" role="alert" aria-label="Error message">
                                    {{ field.errors }}
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                    {{ redirect_field }}
                {% endslot %}

                {% slot actions %}
                <div class="d-grid mb-4">
                    <button type="submit" class="btn btn-outline-primary btn-lg text-uppercase fw-bold py-2" aria-label="Submit password reset form">
                        {% trans "Reset My Password" %}
                    </button>
                </div>
                {% endslot %}
            {% endelement %}

            <p class="text-center text-muted mt-3">
                {% blocktrans %}Please contact us if you have any trouble resetting your password.{% endblocktrans %}
            </p>

        </div>
    </div>
</div>
{% endblock content %}
