{% load static %}
{% with ctx=row|default:item %}

<form method="post" action="{% url 'reservation:adjust_bag' ctx.item_id %}" class="bag-row"
  id="bag-row-{{ ctx.item_id }}" data-price="{{ ctx.product.price }}"
  data-deposit="{{ ctx.product.deposit|default:0 }}">
  {% csrf_token %}
  <input type="hidden" name="redirect_url" value="{% url 'reservation:view_bag' %}">

  <!-- Start Date Picker -->
  <div class="mb-3">
    <label class="form-label">Start Date:</label>
    <div class="input-group" id="start-date-picker-{{ ctx.item_id }}">
      <input id="start-date-{{ ctx.item_id }}" name="start_date" type="text" class="form-control"
        value="{{ ctx.start_date }}" autocomplete="off" />
      <span class="input-group-text">
        <i class="fa fa-calendar"></i>
      </span>
    </div>
  </div>

  <!-- End Date Picker -->
  <div class="mb-3">
    <label class="form-label">End Date:</label>
    <div class="input-group" id="end-date-picker-{{ ctx.item_id }}">
      <input id="end-date-{{ ctx.item_id }}" name="end_date" type="text" class="form-control"
        value="{{ ctx.end_date }}" autocomplete="off" />
      <span class="input-group-text">
        <i class="fa fa-calendar"></i>
      </span>
    </div>
  </div>

  <!-- Phones only (<576px): buttons split far apart -->
  <div class="d-flex justify-content-between d-sm-none mt-3">
    <button class="btn btn-outline-warning me-2 flex-fill" type="submit" name="update">
      <i class="fas fa-chevron-up"></i> Update
    </button>

    <div class="mx-2"></div>

    <button id="remove_{{ ctx.item_id }}" class="btn btn-outline-danger remove-item ms-2 flex-fill"
      type="button" data-item="{{ ctx.item_id }}">
      Remove <i class="fas fa-trash-alt"></i>
    </button>
  </div>

  <!-- Tablet & Desktop (â‰¥576px): inline layout -->
  <div class="d-none d-sm-flex align-items-center gap-2 text-nowrap mt-2">
    <button class="btn btn-outline-warning" type="submit" name="update">
      <i class="fas fa-chevron-up"></i> Update
    </button>
    <button id="remove_{{ ctx.item_id }}" class="btn btn-outline-danger remove-item"
      type="button" data-item="{{ ctx.item_id }}">
      Remove <i class="fas fa-trash-alt"></i>
    </button>
  </div>

</form>

{% endwith %}
